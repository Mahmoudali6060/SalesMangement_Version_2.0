@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Robust admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, robust admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>نظام تخطيط الموارد المؤسسية</title>
    <link rel="apple-touch-icon" sizes="60x60" href="/Content/app-assets/images/ico/apple-icon-60.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/Content/app-assets/images/ico/apple-icon-76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/Content/app-assets/images/ico/apple-icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/Content/app-assets/images/ico/apple-icon-152.png">
    <link rel="shortcut icon" type="image/x-icon" href="/Content/app-assets/images/ico/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/Content/app-assets/images/ico/favicon-32.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <!-- BEGIN VENDOR CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/bootstrap.css">
    <!-- font icons-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/fonts/icomoon.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/fonts/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/vendors/css/extensions/pace.css">
    <!-- END VENDOR CSS-->
    <!-- BEGIN ROBUST CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/app.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/colors.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/custom-rtl.css">
    <!-- END ROBUST CSS-->
    <!-- BEGIN Page Level CSS-->
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/core/menu/menu-types/vertical-overlay-menu.css">
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css-rtl/core/colors/palette-gradient.css">
    <!-- END Page Level CSS-->
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">*@
    <link rel="stylesheet" type="text/css" href="/Content/app-assets/css/sweetalert.min.css">

    <link rel="stylesheet" type="text/css" href="/css/site.css">
    <link href="~/css/selectstyle.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="~/css/toastr.min.css" rel="stylesheet">

</head>


<body data-open="click" data-menu="vertical-menu" data-col="2-columns" class="vertical-layout vertical-menu 2-columns  fixed-navbar">
    <!-- navbar-fixed-top-->
    <nav class="header-navbar navbar navbar-with-menu navbar-fixed-top navbar-semi-dark navbar-shadow">
        <div class="navbar-wrapper">
            <div class="navbar-header">
                <ul class="nav navbar-nav">
                    <li class="nav-item user-full-name">
                        @*<a href="index.html" class="navbar-brand nav-link">
                                <img alt="branding logo"
                                     src="/Content/app-assets/images/logo/logo.jpg"
                                     data-expand="/Content/app-assets/images/logo/logo.jpg"
                                     data-collapse="/Content/app-assets/images/logo/logo-small.png"
                                     class="brand-logo">
                            </a>*@
                        @Context.Session.GetString("_UserFullName")
                    </li>
                </ul>
            </div>
            <div class="navbar-container content container-fluid">
                <div id="navbar-mobile" class="collapse navbar-toggleable-sm">
                    <ul class="nav navbar-nav">
                        <li class="nav-item hidden-sm-down"><a class="nav-link nav-menu-main menu-toggle hidden-xs"><i class="icon-menu5">         </i></a></li>
                    </ul>
                    <ul class="nav navbar-nav float-xs-right">
                        <li class="dropdown dropdown-notification nav-item">
                            <a href="#" data-toggle="dropdown" class="nav-link nav-link-label"><i class="ficon icon-database2"></i></a>
                            <ul class="dropdown-menu dropdown-menu-media dropdown-menu-right">
                                <li class="dropdown-menu-header">
                                    <h6 class="dropdown-header m-0"><span class="grey darken-2">قاعدة البيانات</span><span class="notification-tag tag tag-default tag-danger float-xs-right m-0"></span></h6>
                                </li>
                                <li class="list-group scrollable-container">
                                    <a href="javascript:void(0)" class="list-group-item" data-toggle="modal" data-target="#database-Form" onclick="loadDatabaseEntity()">
                                        <div class="media">
                                            <div class="media-left valign-middle"><i class="icon-server2 icon-bg-circle bg-yellow bg-darken-3"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading yellow darken-3">نسخ  البيانات</h6>
                                                <p class="notification-text font-small-3 text-muted">  اخذ نسخة احتياطية للبيانات لضمان استرجاعها</p>
                                            </div>
                                        </div>
                                    </a>
                                    <a href="javascript:void(0)" class="list-group-item" data-toggle="modal" data-target="#database-Form" onclick="loadDatabaseEntity()">
                                        <div class="media">
                                            <div class="media-left valign-middle"><i class="icon-check2 icon-bg-circle bg-green bg-accent-3"></i></div>
                                            <div class="media-body">
                                                <h6 class="media-heading">استرجاع البيانات</h6>
                                                <p class="notification-text font-small-3 text-muted">  استرجاع قاعدة البيانات الاحتياطية</p>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown dropdown-user nav-item">
                            <a href="#" data-toggle="dropdown" class="dropdown-toggle nav-link dropdown-user-link">
                                <span class="avatar avatar-online">
                                    <img src="/images/Users/@Context.Session.GetString("_ProfileImageUrl")" alt="a">
                                    <i></i>
                                </span>
                                <span class="user-name">  </span>
                                <input type="hidden" id="imagesUrl" value='@Context.Session.GetString("_ImagesUrl")' />
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                @if (Context.Session.GetString("_LoggedUserRole") == "مدير")
                                {
                                    <a href='@Url.Action("Index","Users")' class="dropdown-item"> <i class="icon-head"></i> المستخدمين</a>
                                }

                                <div class="dropdown-divider"></div>
                                <a href='@Url.Action("Logout","Account")' class="dropdown-item"><i class="icon-power3"></i> تسجيل الخروج</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <!-- ////////////////////////////////////////////////////////////////////////////-->
    <!-- main menu-->
    <div data-scroll-to-active="true" class="main-menu menu-fixed menu-dark menu-accordion menu-shadow">
        <!-- main menu header-->
        <div class="main-menu-header">
            <input type="text" placeholder="Search" class="menu-search form-control round" />
        </div>
        <!-- / main menu header-->
        <!-- main menu content-->
        <div class="main-menu-content">
            <ul id="main-menu-navigation" data-menu="menu-navigation" class="navigation navigation-main">
                @(ViewContext.RouteData.Values["id"])
                @{
                    string controllerName = ViewContext.RouteData.Values["controller"].ToString();
                    string actionName = ViewContext.RouteData.Values["action"].ToString();
                    var today = Context.Request.QueryString.Value.LastOrDefault().ToString();

                    if (Context.Session.GetString("_LoggedUserRole") == "مدير")
                    {
                        <li class="nav-item">
                            <a href='@Url.Action("Dashboard", "Home")'><i class="icon-dashboard"></i><span data-i18n="nav.form_layouts.form_layout_basic" class="menu-title">لوحة التحكم</span></a>
                        </li>
                    }
                }
                <li @if (controllerName == "Farmers") { <text> class="active" </text> }>
                    <a href='@Url.Action("Index","Farmers")'><i class="icon-users"></i><span data-i18n="nav.form_layouts.form_layout_basic" class="menu-title">العمــــــــــلاء </span></a>
                </li>
                <li @if (controllerName == "Sellers") { <text> class="active" </text> }>
                    <a href='@Url.Action("Index","Sellers")'><i class="icon-users2"></i><span data-i18n="nav.form_layouts.form_layout_basic" class="menu-title">التجــــــــــار </span></a>
                </li>
                <li>
                    <a href="index.html"><i class="icon-paper"></i><span data-i18n="nav.dash.main" class="menu-title">البيــــــــــان </span></a>
                    <ul class="menu-content">
                        <li @if (controllerName == "Orders" && actionName == "Details") { <text> class="active" </text> }>
                            <a href='@Url.Action("Details","Orders")' data-i18n="nav.dash.main" class="menu-item">بيان جديد</a>
                        </li>
                        <li @if (controllerName == "Orders" && actionName == "Index" && today == "1") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Orders",new { today = 1 })' data-i18n="nav.dash.main" class="menu-item">بيانات اليوم </a>
                        </li>
                        <li @if (controllerName == "Orders" && actionName == "Index") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Orders")' data-i18n="nav.dash.main" class="menu-item">البيانات السابقة </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="icon-list-numbered"></i><span data-i18n="nav.dash.main" class="menu-title">فواتير الشراء </span></a>
                    <ul class="menu-content">
                        <li @if (controllerName == "Purechases" && actionName == "Index" && today == "1") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Purechases",new { today = 1 })' data-i18n="nav.dash.main" class="menu-item">فواتير اليوم </a>
                        </li>
                        <li @if (controllerName == "Purechases" && actionName == "Index" && today != "1") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Purechases")' data-i18n="nav.dash.main" class="menu-item">الفواتير السابقة</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="icon-list-numbered"></i><span data-i18n="nav.dash.main" class="menu-title">كشوفات البيع </span></a>
                    <ul class="menu-content">
                        <li @if (controllerName == "Salesinvoices" && actionName == "Index" && today == "1") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Salesinvoices",new { today = 1 })' data-i18n="nav.dash.main" class="menu-item">كشوفات اليوم </a>
                        </li>
                        <li @if (controllerName == "Salesinvoices" && actionName == "Index" && today != "1") { <text> class="active" </text> }>
                            <a href='@Url.Action("Index","Salesinvoices")' data-i18n="nav.dash.main" class="menu-item">الكشوفات السابقة</a>
                        </li>
                    </ul>
                </li>

                @if (Context.Session.GetString("_LoggedUserRole") == "مدير")
                {
                    @*<li @if (controllerName == "Safes") { <text> class="active" </text> }>
                        <a href='@Url.Action("Index", "Safes")'><i class="icon-users"></i><span data-i18n="nav.form_layouts.form_layout_basic" class="menu-title"> الخزنـــــــــة </span></a>
                    </li>*@


                    <li>
                        <a href="#"><i class="icon-list-numbered"></i><span data-i18n="nav.dash.main" class="menu-title"> الخزنة  </span></a>
                        <ul class="menu-content">
                            <li @if (controllerName == "Safes" && actionName == "Index") { <text> class="active" </text> }>
                                <a href='@Url.Action("Index", "Safes")' data-i18n="nav.dash.main" class="menu-item">صندوق النقدية   </a>
                            </li>
                        </ul>
                    </li>
                }
                @if (Context.Session.GetString("_LoggedUserRole") == "مدير")
                {
                    <li>
                        <a href="#"><i class="icon-list-numbered"></i><span data-i18n="nav.dash.main" class="menu-title">المعاملات الحسابية  </span></a>
                        <ul class="menu-content">
                            <li @if (controllerName == "Transaction" && actionName == "Index") { <text> class="active" </text> }>
                                <a href='@Url.Action("Index", "Transaction", new { today = 1 })' data-i18n="nav.dash.main" class="menu-item">المعاملات اليومية  </a>
                            </li>
                        </ul>
                    </li>
                }

            </ul>
        </div>
    </div>
    <!-- / main menu-->

    @RenderBody()

    <div class="modal fade text-xs-left" id="database-Form" tabindex="-1" role="dialog" aria-labelledby="myModalLabel33" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <label class="modal-title text-text-bold-600" id="myModalLabel33">Database Management</label>
                </div>
                <form>
                    <div class="modal-body">
                        <label>Database: </label>
                        <div class="form-group">
                            <input id="DatabaseName" type="text" class="form-control">
                        </div>
                        <label>Connnection String: </label>
                        <div class="form-group">
                            <input id="ConnectionString" class="form-control">
                        </div>
                        <label>File Path: </label>
                        <div class="form-group">
                            <input id="FilePath" class="form-control">
                            @*<input type="file" id="ctrl" webkitdirectory />*@
                            @*<input type="file" id="flup" onchange="getfolder(event)" webkitdirectory />*@
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="reset" class="btn btn-outline-secondary btn-lg" data-dismiss="modal" value="Close">
                        <input type="button" onclick="backupDatabase();" class="btn btn-outline-primary btn-lg" value="Backup">
                        <input type="button" onclick="restoreDatabase();" class="btn btn-outline-primary btn-lg" value="Restore">
                    </div>
                </form>
            </div>
        </div>
    </div>


    <footer class="footer footer-static footer-light navbar-border navbar-fixed-bottom">
        <p class="clearfix text-muted text-sm-center mb-0 px-2"><span class="float-md-none d-xs-block d-md-inline-block" style="font-size:20px;font-weight:bold">Developed By Mahmoud A.Salman</span></p>
    </footer>

    <script src="/Scripts/jquery-1.10.2.js"></script>

    <!-- BEGIN VENDOR JS-->
    <script src="/Content/app-assets/js/core/libraries/jquery.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/tether.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/js/core/libraries/bootstrap.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/unison.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/blockUI.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/jquery.matchHeight-min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/ui/screenfull.min.js" type="text/javascript"></script>
    <script src="/Content/app-assets/vendors/js/extensions/pace.min.js" type="text/javascript"></script>
    <!-- BEGIN VENDOR JS-->
    <!-- BEGIN PAGE VENDOR JS-->
    <script src="/Content/app-assets/vendors/js/charts/chart.min.js" type="text/javascript"></script>
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN ROBUST JS-->
    <script src="/Content/app-assets/js/core/app-menu.js" type="text/javascript"></script>
    <script src="/Content/app-assets/js/core/app.js" type="text/javascript"></script>
    <!-- END ROBUST JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <script src="/Content/app-assets/js/scripts/pages/dashboard-lite.js" type="text/javascript"></script>
    <!-- END PAGE LEVEL JS-->
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>*@
    <script src="/Content/app-assets/js/scripts/sweet-alert/sweetalert.min.js"></script>

    <script src="/js/persian-numbers-jquery-plugin-master/persianNum.jquery-2.min.js"></script>

    <script src="/js/shared.js"></script>


    @*<script src="//code.jquery.com/jquery.min.js"></script>*@
    <script src="~/js/selectstyle.js"></script>
    <script src="/Scripts/toastr.min.js"></script>

    @RenderSection("Scripts", required: false)
    <script type="text/javascript">
        //$(document).ready(function () {
        //    $('body').persianNum();
        //})

        $('body').persianNum({
            numberType: 'arabic'
        });



    </script>

</body>
</html>
